<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Grand Slam Lead Tools</title>
  <meta name="description" content="Court Image Analyzer (Beta) and Colour Visualizers for Tennis & Netball by Grand Slam Surfacing">
  <link rel="icon" href="assets/favicon.svg">
  <style>
    :root {
      --bg: #f8fafc;
      --fg: #0f172a;
      --muted: #475569;
      --card: #ffffff;
      --border: #e2e8f0;
      --primary: #0f172a;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial; background: var(--bg); color: var(--fg); }
    .container { max-width: 1100px; margin: 0 auto; padding: 0 1rem; }
    header, footer { background: #fff; border-bottom: 1px solid var(--border); }
    footer { border-top: 1px solid var(--border); border-bottom: none; }
    .row { display: grid; gap: 1rem; grid-template-columns: 1fr; }
    @media (min-width: 980px) { .row-2 { grid-template-columns: 1fr 1fr; } .row-3 { grid-template-columns: 2fr 1fr; } }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; box-shadow: 0 1px 2px rgba(0,0,0,.03); }
    .pad { padding: 1.25rem; }
    .btn { display:inline-flex; align-items:center; gap:.5rem; padding:.6rem 1rem; border-radius:12px; border:1px solid var(--border); background:#fff; cursor:pointer; transition:.2s; }
    .btn:hover { box-shadow: 0 2px 8px rgba(0,0,0,.06); }
    .btn.primary { background: var(--primary); color:#fff; border-color: var(--primary); }
    .input, .select, .textarea { width:100%; padding:.6rem .75rem; border-radius:12px; border:1px solid var(--border); }
    .label { font-size:.9rem; color: var(--muted); display:block; margin-bottom:.25rem; }
    .badge { display:inline-block; border:1px solid var(--border); background:#f1f5f9; border-radius:10px; padding:.25rem .5rem; font-size:.75rem; cursor:pointer; }
    .tabs { display:flex; gap:.5rem; flex-wrap: wrap; }
    .tab { padding:.5rem .8rem; border-radius:12px; border:1px solid transparent; cursor:pointer; }
    .tab.active { background: var(--primary); color:#fff; }
    .progress { height:8px; width:100%; background:#f1f5f9; border-radius:999px; overflow:hidden; }
    .progress > span { display:block; height:100%; background:var(--primary); }
    .muted { color: var(--muted); }
    .grid { display:grid; gap: .75rem; }
    .grid-2 { grid-template-columns: 1fr 1fr; }
    .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
    @media (max-width: 700px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }
    a.link { color: var(--primary); text-decoration: none; }
  </style>
</head>
<body>
  <header>
    <div class="container pad" style="display:flex; align-items:center; justify-content:space-between; gap:1rem;">
      <div style="display:flex; align-items:center; gap:.75rem;">
        <div style="width:40px; height:40px; background:#0f172a; color:#fff; display:grid; place-items:center; border-radius:12px; font-weight:700;">GS</div>
        <div>
          <div style="font-weight:700;">Grand Slam Lead Tools</div>
          <div class="muted" style="font-size:.8rem;">By Grand Slam Surfacing · South Africa</div>
        </div>
      </div>
      <a class="btn primary" href="#lead">Get a Quote</a>
    </div>
  </header>

  <main class="container" style="padding: 1rem 0 3rem;">
    <div class="tabs" style="margin: 1rem 0;">
      <button class="tab active" id="tab-analyzer">Court Image Analyzer</button>
      <button class="tab" id="tab-tennis">Tennis Colour Visualizer</button>
      <button class="tab" id="tab-netball">Netball Colour Visualizer</button>
    </div>

    <!-- Analyzer -->
    <section id="panel-analyzer" class="card pad">
      <div class="row row-2">
        <div>
          <h2>Upload a court photo</h2>
          <input id="file" type="file" accept="image/*" class="input" />
          <img id="preview" alt="" style="margin-top:1rem; max-height:360px; width:100%; object-fit:contain; border:1px solid var(--border); border-radius:12px; display:none;" />
          <div style="margin-top: .75rem; display:flex; gap:.5rem;">
            <button class="btn primary" id="btn-analyze">Analyze Image</button>
            <button class="btn" id="btn-reset">Reset</button>
          </div>
          <p class="muted" style="font-size:.8rem; margin-top:.5rem;">Note: This is an indicative analysis, not a replacement for professional inspection.</p>
        </div>
        <div>
          <h2>Condition report</h2>
          <div id="report-empty" class="muted">Run an analysis to see your court's health score and maintenance suggestions.</div>
          <div id="report" style="display:none;">
            <div class="grid grid-2">
              <div class="card pad">
                <div style="display:flex; justify-content:space-between;"><span class="muted">Health Score</span><strong id="score-health">-</strong></div>
                <div class="progress"><span id="bar-health" style="width:0%;"></span></div>
              </div>
              <div class="card pad">
                <div style="display:flex; justify-content:space-between;"><span class="muted">Crack Likelihood</span><strong id="score-crack">-</strong></div>
                <div class="progress"><span id="bar-crack" style="width:0%;"></span></div>
              </div>
              <div class="card pad">
                <div style="display:flex; justify-content:space-between;"><span class="muted">Fading Score</span><strong id="score-fade">-</strong></div>
                <div class="progress"><span id="bar-fade" style="width:0%;"></span></div>
              </div>
              <div class="card pad">
                <div style="display:flex; justify-content:space-between;"><span class="muted">Line Visibility</span><strong id="score-lines">-</strong></div>
                <div class="progress"><span id="bar-lines" style="width:0%;"></span></div>
              </div>
            </div>
            <ul style="margin-top:.75rem; padding-left:1.25rem;">
              <li>High crack likelihood suggests surface stress—consider inspection.</li>
              <li>Fading indicates UV wear; resurfacing restores grip and colour.</li>
              <li>Low line visibility impacts play quality and safety.</li>
            </ul>

            <div class="card pad" id="lead">
              <div style="font-weight:600; margin-bottom:.25rem;">Next step: Book a professional inspection</div>
              <div class="muted" style="font-size:.9rem; margin-bottom:.5rem;">Share your details and we’ll confirm on-site assessment and a resurfacing quote.</div>
              <form action="https://formsubmit.co/greymc041.ai@gmail.com" method="POST" class="grid grid-2">
                <input type="hidden" name="_subject" value="New Lead from Analyzer: Grand Slam Surfacing">
                <input type="hidden" name="_template" value="table">
                <input type="hidden" name="_captcha" value="false">
                <div>
                  <label class="label">Name</label>
                  <input class="input" name="name" placeholder="Full name" required>
                </div>
                <div>
                  <label class="label">Email</label>
                  <input class="input" type="email" name="email" placeholder="name@example.com" required>
                </div>
                <div>
                  <label class="label">Phone</label>
                  <input class="input" name="phone" placeholder="+27 ...">
                </div>
                <div>
                  <label class="label">Location</label>
                  <input class="input" name="location" value="South Africa">
                </div>
                <div class="grid" style="grid-column: 1 / -1;">
                  <label class="label">Notes</label>
                  <textarea class="textarea" name="notes" placeholder="Court details, timing, budget"></textarea>
                </div>
                <div style="grid-column: 1 / -1;">
                  <button class="btn primary" type="submit">Request Inspection</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TENNIS Visualizer (Green inner, Clay outer, White lines; all adjustable) -->
    <section id="panel-tennis" class="card pad" style="display:none; margin-top:1rem;">
      <div class="row row-3">
        <div>
          <h2>Tennis court preview</h2>
          <div class="card" style="padding:0;">
            <svg id="tennis-svg" viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg" style="width:100%; height:auto; display:block; border-radius:16px; overflow:hidden;">
              <!-- Clay outer -->
              <rect id="tennis-outer" x="0" y="0" width="1200" height="700" fill="#b24b1a" />
              <!-- Green inner -->
              <rect id="tennis-inner" x="100" y="50" width="1000" height="600" fill="#226d2b" />
              <!-- Lines -->
              <g id="tennis-lines" stroke="#ffffff" stroke-width="6" fill="none">
                <rect x="100" y="50" width="1000" height="600" />
                <rect x="220" y="110" width="760" height="480" />
                <line x1="100" y1="350" x2="1100" y2="350" />
                <line x1="220" y1="350" x2="980" y2="350" />
                <line x1="600" y1="110" x2="600" y2="590" />
                <line x1="220" y1="260" x2="980" y2="260" />
                <line x1="220" y1="440" x2="980" y2="440" />
              </g>
            </svg>
          </div>
          <div style="margin-top:.5rem;"><button class="btn" id="tennis-download">Download PNG</button></div>
        </div>
        <div class="grid">
          <div class="grid grid-3">
            <div>
              <label class="label">Outer (Clay)</label>
              <input type="color" id="tennis-color-outer" class="input" value="#b24b1a">
            </div>
            <div>
              <label class="label">Inner (Green)</label>
              <input type="color" id="tennis-color-inner" class="input" value="#226d2b">
            </div>
            <div>
              <label class="label">Lines</label>
              <input type="color" id="tennis-color-lines" class="input" value="#ffffff">
            </div>
          </div>

          <div>
            <div style="font-weight:600; margin-bottom:.25rem;">Presets</div>
            <div style="display:flex; flex-wrap:wrap; gap:.5rem;">
              <span class="badge tennis-preset" data-outer="#b24b1a" data-inner="#226d2b" data-lines="#ffffff">Grass on Clay</span>
              <span class="badge tennis-preset" data-outer="#0b2a66" data-inner="#1e40af" data-lines="#ffffff">US Open Blue</span>
              <span class="badge tennis-preset" data-outer="#003b73" data-inner="#0077c8" data-lines="#ffffff">Australian Open</span>
              <span class="badge tennis-preset" data-outer="#1f5130" data-inner="#2b7a4b" data-lines="#ffffff">Wimbledon Green</span>
            </div>
          </div>

          <div class="card pad">
            <div style="font-weight:600; margin-bottom:.25rem;">Like this look? Get a quote</div>
            <form id="tennis-quote" action="https://formsubmit.co/greymc041.ai@gmail.com" method="POST" class="grid">
              <input type="hidden" name="_subject" value="Tennis Colour Quote Request: Grand Slam Surfacing">
              <input type="hidden" name="_template" value="table">
              <input type="hidden" name="_captcha" value="false">
              <input type="hidden" name="selected_colours" id="tennis-selected" value="{}">
              <div>
                <label class="label">Name</label>
                <input class="input" name="name" placeholder="Full name" required>
              </div>
              <div>
                <label class="label">Email</label>
                <input class="input" type="email" name="email" placeholder="name@example.com" required>
              </div>
              <div>
                <label class="label">Phone</label>
                <input class="input" name="phone" placeholder="+27 ...">
              </div>
              <button class="btn primary" type="submit">Send me a quote</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- NETBALL Visualizer (Light inner blue, Dark outer blue, White lines; adjustable) -->
    <section id="panel-netball" class="card pad" style="display:none; margin-top:1rem;">
      <div class="row row-3">
        <div>
          <h2>Netball court preview</h2>
          <div class="card" style="padding:0;">
            <svg id="netball-svg" viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg" style="width:100%; height:auto; display:block; border-radius:16px; overflow:hidden;">
              <!-- Outer -->
              <rect id="netball-outer" x="0" y="0" width="1200" height="700" fill="#0b2a66" />
              <!-- Inner -->
              <rect id="netball-inner" x="60" y="40" width="1080" height="620" fill="#1ea7ff" />
              <!-- Lines group -->
              <g id="netball-lines" stroke="#ffffff" stroke-width="6" fill="none">
                <!-- Boundary -->
                <rect x="60" y="40" width="1080" height="620" />
                <!-- Thirds -->
                <line x1="420" y1="40" x2="420" y2="660" />
                <line x1="780" y1="40" x2="780" y2="660" />
                <!-- Centre circle -->
                <circle cx="600" cy="350" r="40" />
                <!-- Shooting semicircles -->
                <path d="M 60 200 A 150 150 0 0 0 60 500" />
                <path d="M 1140 200 A 150 150 0 0 1 1140 500" />
              </g>
            </svg>
          </div>
          <div style="margin-top:.5rem;"><button class="btn" id="netball-download">Download PNG</button></div>
        </div>
        <div class="grid">
          <div class="grid grid-3">
            <div>
              <label class="label">Outer (Dark)</label>
              <input type="color" id="netball-color-outer" class="input" value="#0b2a66">
            </div>
            <div>
              <label class="label">Inner (Light)</label>
              <input type="color" id="netball-color-inner" class="input" value="#1ea7ff">
            </div>
            <div>
              <label class="label">Lines</label>
              <input type="color" id="netball-color-lines" class="input" value="#ffffff">
            </div>
          </div>

          <div>
            <div style="font-weight:600; margin-bottom:.25rem;">Preset</div>
            <div style="display:flex; flex-wrap:wrap; gap:.5rem;">
              <span class="badge netball-preset" data-outer="#0b2a66" data-inner="#1ea7ff" data-lines="#ffffff">Blue Duo</span>
            </div>
          </div>

          <div class="card pad">
            <div style="font-weight:600; margin-bottom:.25rem;">Like this look? Get a quote</div>
            <form id="netball-quote" action="https://formsubmit.co/greymc041.ai@gmail.com" method="POST" class="grid">
              <input type="hidden" name="_subject" value="Netball Colour Quote Request: Grand Slam Surfacing">
              <input type="hidden" name="_template" value="table">
              <input type="hidden" name="_captcha" value="false">
              <input type="hidden" name="selected_colours" id="netball-selected" value="{}">
              <div>
                <label class="label">Name</label>
                <input class="input" name="name" placeholder="Full name" required>
              </div>
              <div>
                <label class="label">Email</label>
                <input class="input" type="email" name="email" placeholder="name@example.com" required>
              </div>
              <div>
                <label class="label">Phone</label>
                <input class="input" name="phone" placeholder="+27 ...">
              </div>
              <button class="btn primary" type="submit">Send me a quote</button>
            </form>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container pad" style="display:flex; align-items:center; justify-content:space-between; gap:1rem; font-size:.9rem;">
      <div>© <span id="year"></span> Grand Slam Surfacing. All rights reserved.</div>
      <div style="display:flex; gap:.5rem;">
        <a class="badge link" href="#" target="_blank">Privacy</a>
        <a class="badge link" href="#" target="_blank">Terms</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Tabs
    const tabA = document.getElementById('tab-analyzer');
    const tabT = document.getElementById('tab-tennis');
    const tabN = document.getElementById('tab-netball');
    const panelA = document.getElementById('panel-analyzer');
    const panelT = document.getElementById('panel-tennis');
    const panelN = document.getElementById('panel-netball');
    function activate(which) {
      const isA = which==='a', isT = which==='t', isN = which==='n';
      tabA.classList.toggle('active', isA); panelA.style.display = isA ? 'block' : 'none';
      tabT.classList.toggle('active', isT); panelT.style.display = isT ? 'block' : 'none';
      tabN.classList.toggle('active', isN); panelN.style.display = isN ? 'block' : 'none';
    }
    tabA.onclick = () => activate('a');
    tabT.onclick = () => activate('t');
    tabN.onclick = () => activate('n');

    // Analyzer logic
    const fileInput = document.getElementById('file');
    const preview = document.getElementById('preview');
    const btnAnalyze = document.getElementById('btn-analyze');
    const btnReset = document.getElementById('btn-reset');
    const reportEmpty = document.getElementById('report-empty');
    const report = document.getElementById('report');
    const sHealth = document.getElementById('score-health');
    const sCrack = document.getElementById('score-crack');
    const sFade = document.getElementById('score-fade');
    const sLines = document.getElementById('score-lines');
    const bHealth = document.getElementById('bar-health');
    const bCrack = document.getElementById('bar-crack');
    const bFade = document.getElementById('bar-fade');
    const bLines = document.getElementById('bar-lines');

    let imgURL = null;
    if (fileInput) {
      fileInput.addEventListener('change', (e) => {
        const f = e.target.files && e.target.files[0];
        if (!f) return;
        if (imgURL) URL.revokeObjectURL(imgURL);
        imgURL = URL.createObjectURL(f);
        preview.src = imgURL;
        preview.style.display = 'block';
        report.style.display = 'none';
        reportEmpty.style.display = 'block';
      });
      btnAnalyze.addEventListener('click', async () => {
        if (!imgURL) return alert('Please choose a photo first.');
        const res = await analyze(imgURL);
        sHealth.textContent = res.scores.healthScore;
        sCrack.textContent = res.scores.crackLikelihood;
        sFade.textContent = res.scores.fadingScore;
        sLines.textContent = res.scores.lineVisibility;
        bHealth.style.width = res.scores.healthScore + '%';
        bCrack.style.width = res.scores.crackLikelihood + '%';
        bFade.style.width = res.scores.fadingScore + '%';
        bLines.style.width = res.scores.lineVisibility + '%';
        reportEmpty.style.display = 'none';
        report.style.display = 'block';
      });
      btnReset.addEventListener('click', () => {
        fileInput.value = '';
        if (imgURL) URL.revokeObjectURL(imgURL);
        imgURL = null;
        preview.src = '';
        preview.style.display = 'none';
        report.style.display = 'none';
        reportEmpty.style.display = 'block';
      });
    }

    function round2(n) { return Math.round(n*100)/100; }
    function loadImage(url) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.onload = () => resolve(img);
        img.onerror = reject;
        img.src = url;
      });
    }
    function analyzeBrightnessContrast(ctx, w, h) {
      const { data } = ctx.getImageData(0,0,w,h);
      let sum=0, sumSq=0, N = data.length/4;
      for (let i=0;i<data.length;i+=4) {
        const r=data[i], g=data[i+1], b=data[i+2];
        const y = 0.2126*r + 0.7152*g + 0.0722*b;
        sum += y; sumSq += y*y;
      }
      const mean = sum / N;
      const variance = (sumSq/N) - (mean*mean);
      const std = Math.sqrt(Math.max(0, variance));
      return { brightness: mean/255, contrast: Math.min(1, std/64) };
    }
    function analyzeEdges(ctx, w, h) {
      const src = ctx.getImageData(0,0,w,h);
      const gray = new Uint8ClampedArray(w*h);
      for (let i=0, j=0; i<src.data.length; i+=4, j++) {
        gray[j] = (0.2126*src.data[i] + 0.7152*src.data[i+1] + 0.0722*src.data[i+2]);
      }
      const gx = [-1,0,1, -2,0,2, -1,0,1];
      const gy = [-1,-2,-1, 0,0,0, 1,2,1];
      let sumMag=0, count=0;
      for (let y=1;y<h-1;y++) {
        for (let x=1;x<w-1;x++) {
          let sx=0, sy=0, k=0;
          for (let ky=-1;ky<=1;ky++) {
            for (let kx=-1;kx<=1;kx++) {
              const px = x+kx, py = y+ky;
              const val = gray[py*w + px];
              sx += val * gx[k];
              sy += val * gy[k];
              k++;
            }
          }
          const mag = Math.sqrt(sx*sx + sy*sy);
          sumMag += mag; count++;
        }
      }
      const meanMag = sumMag / count;
      return Math.min(1, meanMag/200);
    }
    async function analyze(url) {
      const img = await loadImage(url);
      const maxSide = 900;
      const scale = Math.min(1, maxSide / Math.max(img.width, img.height));
      const w = Math.round(img.width*scale), h=Math.round(img.height*scale);
      const canvas = document.createElement('canvas'); canvas.width=w; canvas.height=h;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img,0,0,w,h);
      const bc = analyzeBrightnessContrast(ctx,w,h);
      const edge = analyzeEdges(ctx,w,h);
      const fadingScore = Math.max(0, 100 - Math.round(bc.contrast * 120));
      const crackLikelihood = Math.min(100, Math.round(edge * 140));
      const lineVisibility = Math.max(0, Math.min(100, Math.round((bc.contrast * 100) - (bc.brightness * 10))));
      const healthScore = Math.max(0, 100 - Math.round((fadingScore*0.4 + crackLikelihood*0.5) - lineVisibility*0.1));
      return {
        width: img.width, height: img.height,
        brightness: round2(bc.brightness*100),
        contrast: round2(bc.contrast*100),
        edgeStrength: round2(edge*100),
        scores: { fadingScore, crackLikelihood, lineVisibility, healthScore }
      };
    }

    // Tennis controls
    const tSVG = document.getElementById('tennis-svg');
    const tOuter = document.getElementById('tennis-outer');
    const tInner = document.getElementById('tennis-inner');
    const tLines = document.getElementById('tennis-lines');
    const tCO = document.getElementById('tennis-color-outer');
    const tCI = document.getElementById('tennis-color-inner');
    const tCL = document.getElementById('tennis-color-lines');
    const tDL = document.getElementById('tennis-download');
    const tPresets = document.querySelectorAll('.tennis-preset');
    const tSelected = document.getElementById('tennis-selected');

    function tUpdateSelected() {
      tSelected.value = JSON.stringify({ outer: tOuter.getAttribute('fill'), inner: tInner.getAttribute('fill'), lines: tLines.getAttribute('stroke') });
    }
    function tApply() {
      tOuter.setAttribute('fill', tCO.value);
      tInner.setAttribute('fill', tCI.value);
      tLines.setAttribute('stroke', tCL.value);
      tUpdateSelected();
    }
    if (tCO) { tCO.oninput = tApply; tCI.oninput = tApply; tCL.oninput = tApply; tApply(); }
    tPresets.forEach(el => el.addEventListener('click', () => { tCO.value = el.dataset.outer; tCI.value = el.dataset.inner; tCL.value = el.dataset.lines; tApply(); }));
    if (tDL) {
      tDL.addEventListener('click', () => {
        const svgData = new XMLSerializer().serializeToString(tSVG);
        const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas'); canvas.width = 1200; canvas.height = 700;
          const ctx = canvas.getContext('2d'); ctx.drawImage(img,0,0,canvas.width,canvas.height);
          URL.revokeObjectURL(url);
          const a = document.createElement('a'); a.download='tennis-visual.png'; a.href = canvas.toDataURL('image/png'); a.click();
        };
        img.src = url;
      });
    }

    // Netball controls
    const nSVG = document.getElementById('netball-svg');
    const nOuter = document.getElementById('netball-outer');
    const nInner = document.getElementById('netball-inner');
    const nLines = document.getElementById('netball-lines');
    const nCO = document.getElementById('netball-color-outer');
    const nCI = document.getElementById('netball-color-inner');
    const nCL = document.getElementById('netball-color-lines');
    const nDL = document.getElementById('netball-download');
    const nPresets = document.querySelectorAll('.netball-preset');
    const nSelected = document.getElementById('netball-selected');

    function nUpdateSelected() {
      nSelected.value = JSON.stringify({ outer: nOuter.getAttribute('fill'), inner: nInner.getAttribute('fill'), lines: nLines.getAttribute('stroke') });
    }
    function nApply() {
      nOuter.setAttribute('fill', nCO.value);
      nInner.setAttribute('fill', nCI.value);
      nLines.setAttribute('stroke', nCL.value);
      nUpdateSelected();
    }
    if (nCO) { nCO.oninput = nApply; nCI.oninput = nApply; nCL.oninput = nApply; nApply(); }
    nPresets.forEach(el => el.addEventListener('click', () => { nCO.value = el.dataset.outer; nCI.value = el.dataset.inner; nCL.value = el.dataset.lines; nApply(); }));
    if (nDL) {
      nDL.addEventListener('click', () => {
        const svgData = new XMLSerializer().serializeToString(nSVG);
        const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas'); canvas.width = 1200; canvas.height = 700;
          const ctx = canvas.getContext('2d'); ctx.drawImage(img,0,0,canvas.width,canvas.height);
          URL.revokeObjectURL(url);
          const a = document.createElement('a'); a.download='netball-visual.png'; a.href = canvas.toDataURL('image/png'); a.click();
        };
        img.src = url;
      });
    }
  </script>
</body>
</html>
